import{a as c,b as u,c as g}from"./apiClient-TX8OfoMt.js";async function y(e){return await c(u,"POST",e)}async function f(){try{const e=await c(g,"POST",{});return console.log("API key created successfully:",e),e&&e.key?(localStorage.setItem("noroffApiKey",e.key),console.log("API key stored in localStorage:",e.key)):console.warn("API key response did not contain a key:",e),e}catch(e){throw console.error("Error creating API key:",e),e}}async function k(e){e.preventDefault();const n=e.target,a=n.elements.email.value.trim(),l=n.elements.password.value,i={email:a,password:l},s=document.getElementById("error-message"),r=document.getElementById("login-success-msg"),o=document.getElementById("login-spinner");s.textContent="",r.textContent="",o.hidden=!1;try{const{data:t}=await y(i);if(!t?.accessToken)throw new Error("No access token returned.");localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("username",t.name);const m=await f();console.log("API key:",m?.key),o.hidden=!0,r.textContent="✅ Login successful! Redirecting…";const d="/fed2-js2-ca-remylian/";setTimeout(()=>{window.location.href=`${d}`},2e3)}catch(t){o.hidden=!0,console.error("Login error:",t),s.textContent=t.message}}const I=document.forms.login;I.addEventListener("submit",k);
