import{a as d,A as u}from"./apiClient-TX8OfoMt.js";import{a as f}from"./authGuard-D1nHpxub.js";async function y(e){return await d(u,"POST",e)}async function g(e){e.preventDefault();const t=e.target,r=document.getElementById("create-btn"),s=document.getElementById("create-spinner"),o=t.elements.title.value.trim(),m=t.elements.body.value.trim(),c=t.elements.tags.value.split(",").map(a=>a.trim()).filter(Boolean),n=t.elements.media.value.trim(),i={title:o,body:m,tags:c};if(n)try{new URL(n),i.media={url:n,alt:`${o} - banner image`}}catch{return alert("please enter a valid URL for the image")}try{r.disabled=!0,s.hidden=!1,await y(i),alert("Post created successfully!"),window.location.href="/"}catch(a){console.error(a),document.getElementById("error-message").textContent=a.message}finally{s.hidden=!0,r.disabled=!1}}f();const l=document.forms.createPost;l&&l.addEventListener("submit",g);
